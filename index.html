<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Create Sales Order</title>
  </head>
  <body>
    <input type="button" value="Lead anlegen" onclick="openLeadQuickCreate()" />
    <input
      type="button"
      value="Opportunity anlegen"
      onclick="openOpportunityQuickCreate()"
    />
    <input
      type="button"
      value="Sales Quote anlegen"
      onclick="openSalesQuoteQuickCreate()"
    />

    <script>
      function openOpportunityQuickCreate() {
        let event = {
          operation: "navigation",
          params: {
            routingKey: "guidedselling",
            viewType: "quickcreate",
            params: {
              $individualCustomer:
                '{id: "0199c31f-e132-7000-920b-e781035e190d"}',
            },
          },
          contextData: {
            individualCustomer: { id: "0199c31f-e132-7000-920b-e781035e190d"} ,
            isDraftMode: true,
          },
          data: {
            individualCustomer: '{id: "0199c31f-e132-7000-920b-e781035e190d"}',
            contextData: {
              individualCustomer:
                '{id: "0199c31f-e132-7000-920b-e781035e190d"}',
            },
          },
        };

        window.parent.postMessage(event, "*");
      }
      function openLeadQuickCreate() {
        let event = {
          operation: "navigation",
          params: {
            routingKey: "lead",
            viewType: "quickcreate",
            prefill: {
              name: "andreas-test-lead",
              // Replace 'fieldID' with the actual technical ID of the field
              // account: { id: "11efcc3f-cec9-a25e-afdb-81d149020a00" },
              // Add more fields as needed (e.g., Category, Priority)
              // "IncidentCategory": "1",
              // "Priority": "2"
            },
          },
        };

        window.parent.postMessage(event, "*");
      }
      function openSalesQuoteQuickCreate() {
        let event = {
          operation: "navigation",
          params: {
            routingKey: "sales-quote",
            viewType: "list",
            $individualCustomer: '{id: "0199c31f-e132-7000-920b-e781035e190d"}',
          },
        };

        window.parent.postMessage(event, "*");
      }

      window.parent.addEventListener("message", (evt) => {
        const msg = evt.data || {};
        console.log(`new event: ${JSON.stringify(evt)}`);
      });
    </script>
  </body>
</html>
