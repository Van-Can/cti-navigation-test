<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Create Sales Order</title>
  </head>
  <body>
    <input
      type="button"
      value="Lead anlegen"
      onclick="openLeadQuickCreate()"
    />
    <input
      type="button"
      value="Opportunity anlegen"
      onclick="openOpportunityQuickCreate()"
    />
    <input
      type="button"
      value="Sales Quote anlegen"
      onclick="openSalesQuoteQuickCreate()"
    />

    <script>
      function openOpportunityQuickCreate() {
        let event = {
          operation: "navigation",
          params: {
            routingKey: "guidedselling",
            viewType: "quickcreate",
            $individualCustomer: '{id: "0199c31f-e132-7000-920b-e781035e190d"}',
          },
          data: {
            individualCustomer: '{id: "0199c31f-e132-7000-920b-e781035e190d"}',
            contextData: {
              individualCustomer:
                '{id: "0199c31f-e132-7000-920b-e781035e190d"}',
            },
          },
        };

        window.parent.postMessage(event, "*");
      }
      function openLeadQuickCreate() {
        let event = {
          operation: "navigation",
          params: {
            routingKey: "lead",
            viewType: "quickcreate",
            $individualCustomer: '{id: "0199c31f-e132-7000-920b-e781035e190d"}',
          }
        };

        window.parent.postMessage(event, "*");
      }
      function openSalesQuoteQuickCreate() {
        let event = {
          operation: "navigation",
          params: {
            routingKey: "sales-quote",
            //viewType: "create",
            $individualCustomer: '{id: "0199c31f-e132-7000-920b-e781035e190d"}',
          }
        };

        window.parent.postMessage(event, "*");
      }

        window.addEventListener("message", (evt) => {
    if (!ALLOWED_ORIGINS.includes(evt.origin)) return;   // security

    const msg = evt.data || {};
    // All UI events use a { event, operation, data } shape.
    switch (msg.event) {
      case "uiEvent":
        // react to host-sent UI events (e.g., refresh completed)
        break;
      case "contextEvent":
        // receive current object context, ids, etc.
        // e.g., const { objectType, objectId } = msg.data || {};
        break;
      default:
        // ignore unknown events
    }
  });

    </script>
  </body>
</html>
